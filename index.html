<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ê²½ì˜ê´€ë¦¬ë³¸ë¶€ MT â€“ ì›Œí¬ìƒµ ì˜¤ë½ì‹¤</title>

  <!-- ê¸°ë³¸, ê¹”ë”í•œ ë³¸ë¬¸ í°íŠ¸ (ê·¸ë¦¼ì ì—†ìŒ) -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;600;700;800&display=swap" rel="stylesheet"/>

  <style>
    :root{
      --bg:#0f1220;
      --ink:#e9ecf4;
      --muted:#afb7cd;
      --line:#232843;
      --card:#171b2e;
      --card-soft:#151a2b;
      --primary:#7aa2ff;
      --accent:#72e4c2;
      --radius:16px;

      /* íŒ€ ìƒ‰ìƒ */
      --t1:#7aa2ff; --t1-bg:#1a2548;
      --t2:#72e4c2; --t2-bg:#143336;
      --t3:#ffd166; --t3-bg:#3a2e14;
      --t4:#ff8fab; --t4-bg:#3a1f2a;
      --t5:#a78bfa; --t5-bg:#2a2141;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple SD Gothic Neo", "ë§‘ì€ ê³ ë”•", sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(114,228,194,.12), transparent 60%),
        radial-gradient(800px 400px at 10% 0%, rgba(122,162,255,.18), transparent 60%),
        var(--bg);
    }

    .wrap{max-width:980px; margin:0 auto; padding:24px; padding-bottom:72px}

    header.card{
      padding:28px 24px;
      border:1px solid var(--line);
      border-radius:var(--radius);
      background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
    }
    .title{display:flex; align-items:center; gap:12px; flex-wrap:wrap}
    .badge{
      color:#0f1220; background:linear-gradient(90deg, var(--primary), var(--accent));
      font-weight:800; padding:6px 10px; border-radius:999px; font-size:12px; letter-spacing:.3px
    }
    h1{margin:0; font-size:clamp(22px, 3.6vw, 32px); font-weight:800; letter-spacing:.2px}
    .subtitle{margin:6px 0 0; color:var(--muted); font-size:clamp(14px, 2.2vw, 16px)}

    .grid{display:grid; grid-template-columns:1fr; gap:16px; margin-top:18px}

    .card{
      border:1px solid var(--line);
      background:var(--card);
      border-radius:var(--radius);
      padding:20px;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }

    /* ì¡° ë°°ì • ì¹´ë“œ */
    .assign{
      display:grid; gap:16px
    }
    .row{display:flex; gap:10px; flex-wrap:wrap}
    label{font-weight:700; font-size:14px}
    .input{
      flex:1 1 260px;
      background:var(--card-soft); color:var(--ink);
      border:1px solid var(--line);
      border-radius:12px; padding:12px 14px; font-size:16px;
      outline:none;
    }
    .btn{
      appearance:none; border:none; cursor:pointer;
      background:var(--primary); color:#0f1220;
      padding:12px 16px; border-radius:12px; font-weight:800; font-size:16px;
    }
    .btn.secondary{
      background:transparent; color:var(--muted); border:1px solid var(--line)
    }
    .hint{color:var(--muted); font-size:13px}

    .result{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      border:1px solid var(--line); border-radius:12px; padding:14px 16px; background:var(--card-soft)
    }
    .who{margin:0; font-weight:800; font-size:clamp(16px, 2.6vw, 18px)}
    .pill{
      padding:10px 14px; border-radius:999px; font-weight:800; font-size:clamp(16px, 3vw, 18px);
      display:inline-flex; align-items:center; gap:8px; border:1px solid transparent
    }
    .pill .dot{width:8px; height:8px; border-radius:50%}

    /* íŒ€ ìƒ‰ìƒ í…Œë§ˆ */
    .t1{ color:var(--t1); background:var(--t1-bg); border-color:rgba(122,162,255,.5) }
    .t1 .dot{ background:var(--t1) }
    .t2{ color:var(--t2); background:var(--t2-bg); border-color:rgba(114,228,194,.5) }
    .t2 .dot{ background:var(--t2) }
    .t3{ color:#ffd166; background:var(--t3-bg); border-color:rgba(255,209,102,.5) }
    .t3 .dot{ background:#ffd166 }
    .t4{ color:#ff8fab; background:var(--t4-bg); border-color:rgba(255,143,171,.5) }
    .t4 .dot{ background:#ff8fab }
    .t5{ color:#c2b3ff; background:var(--t5-bg); border-color:rgba(167,139,250,.5) }
    .t5 .dot{ background:#c2b3ff }

    .status{font-size:13px; color:var(--muted)}
    .status strong{color:var(--ink)}

    /* ê²Œì„ ì•„ì½”ë””ì–¸ */
    .games h2{margin:0 0 12px; font-size:clamp(18px, 3vw, 22px)}
    details{
      border:1px solid var(--line); border-radius:12px; background:#151a2b; overflow:hidden
    }
    details+details{margin-top:10px}
    summary{
      list-style:none; cursor:pointer; padding:16px 18px; font-weight:800;
      display:flex; align-items:center; justify-content:space-between; gap:12px
    }
    summary::-webkit-details-marker{display:none}
    .tag{ color:#0f1220; background:var(--accent); border-radius:999px; padding:4px 10px; font-size:12px; font-weight:800 }
    .chev{ width:10px; height:10px; border-right:2px solid var(--muted); border-bottom:2px solid var(--muted); transform:rotate(-45deg); transition:.2s; opacity:.9 }
    details[open] .chev{ transform:rotate(45deg) }
    .panel{ padding:0 18px 16px; color:var(--muted); line-height:1.7; font-size:clamp(14px, 2.5vw, 16px); border-top:1px solid var(--line); background:linear-gradient(180deg, rgba(255,255,255,.01), transparent) }
    .panel ul{ padding-left:18px; margin:10px 0 0 }
    .panel li{ margin:4px 0 }

    footer{margin-top:28px; color:var(--muted); font-size:13px; text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <!-- í—¤ë” -->
    <header class="card">
      <div class="title">
        <span class="badge">ì›Œí¬ìƒµ ì˜¤ë½ì‹¤</span>
        <h1>ê²½ì˜ê´€ë¦¬ë³¸ë¶€ MT ë ˆí¬ë¦¬ì—ì´ì…˜</h1>
      </div>
      <p class="subtitle">ì¦ê²ê²Œ ë†€ê³ , ê°€ë³ê²Œ ê²½ìŸí•˜ê³ , ìì—°ìŠ¤ëŸ½ê²Œ ì¹œí•´ì§€ëŠ” ì‹œê°„!</p>
    </header>

    <section class="grid">
      <!-- ì¡° ë°°ì • ì¹´ë“œ -->
      <div class="card assign">
        <div class="row" aria-label="ì´ë¦„ ì…ë ¥ ë° ë°°ì •">
          <label for="name" class="sr-only">ì´ë¦„</label>
          <input id="name" class="input" type="text" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
          <button id="assignBtn" class="btn">ì¡° ë°°ì • ë°›ê¸°</button>
          <button id="resetBtn" class="btn secondary" title="ì´ë¦„/ë°°ì • ì´ˆê¸°í™”">ì´ˆê¸°í™”</button>
        </div>
        <div class="hint">â€» 1~5ì¡° ì¤‘ í•˜ë‚˜ë¡œ ëœë¤ ë°°ì •ë˜ë©°, ì¡°ë‹¹ ìµœëŒ€ 5ëª… ê¸°ì¤€ìœ¼ë¡œ ë°°ì •í•©ë‹ˆë‹¤.</div>

        <div class="result" role="status" aria-live="polite">
          <p class="who"><strong id="who">ì°¸ê°€ì</strong>ë‹˜ì˜ ë°°ì • ê²°ê³¼</p>
          <span id="teamPill" class="pill t1"><span class="dot"></span><span id="teamText">ë°°ì • ëŒ€ê¸°</span></span>
        </div>
        <div class="status" id="statusLine">ì´ë¦„ì„ ì…ë ¥í•œ ë’¤ <strong>ì¡° ë°°ì • ë°›ê¸°</strong>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
      </div>

      <!-- ê²Œì„ ì•ˆë‚´ -->
      <div class="card games">
        <h2>ê²Œì„ ì•ˆë‚´ (ì´ 5ê°€ì§€)</h2>

        <details>
          <summary>â‘  ë„¤ ê¸€ì ê²Œì„ <span class="tag">íŒ€ì „</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>ì‚¬íšŒì ì£¼ì œì— ë§ì¶° <strong>ì •í™•íˆ ë„¤ ê¸€ì</strong> ë‹¨ì–´ë¥¼ ë§í•˜ê¸°.</li>
              <li>íŒ€ ë¦´ë ˆì´ 30ì´ˆ, ê°™ì€ ë‹¨ì–´ ë°˜ë³µ ê¸ˆì§€, <em>íŒ¨ìŠ¤ 1íšŒ</em>.</li>
              <li>ìƒì¡´ íŒ€ 1ì ì”©, í•©ì‚° ê³ ë“ì  íŒ€ ìŠ¹ë¦¬.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>â‘¡ ì¿ íŒ¡ ê°€ê²© ë§íˆê¸° <span class="tag">í€´ì¦ˆ</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>ì œì‹œ ìƒí’ˆì˜ <strong>ì‹¤ì œ íŒë§¤ê°€ ê·¼ì‚¬ì¹˜</strong> ìˆœìœ¼ë¡œ ì ìˆ˜(3â€†/â€†2â€†/â€†1ì ).</li>
              <li>ê°€ê²© ê³µê°œ ì „ ìµœì¢… ë³€ê²½ 1íšŒ ê°€ëŠ¥.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>â‘¢ ì´ˆì„± í€´ì¦ˆ <span class="tag">ìŠ¤í”¼ë“œ</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>ì œì‹œì–´ <strong>ì´ˆì„±</strong>ë§Œ ë³´ê³  ì •ë‹µ ë§íˆê¸°.</li>
              <li>ëŒ€í‘œìë§Œ ì½œ, ì˜¤ë‹µ ì‹œ 5ì´ˆ ëŒ€ê¸°.</li>
              <li>ë³´ë„ˆìŠ¤ ë¼ìš´ë“œ ì •ë‹µ 2ì .</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>â‘£ ê³ ìš” ì†ì˜ ì™¸ì¹¨ <span class="tag">ì•¡í‹°ë¸Œ</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>í—¤ë“œí° ì°©ìš©ì, ì…ëª¨ì–‘/ì œìŠ¤ì²˜ë¡œ ì œì‹œì–´ ë§íˆê¸°.</li>
              <li>ì œí•œ 60ì´ˆ, ì •ë‹µ 1ê°œë‹¹ 1ì , íŒ¨ìŠ¤ 2íšŒ.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>â‘¤ ë…¸ë˜ ë§íˆê¸° <span class="tag">ìŒì•…</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>ì¸íŠ¸ë¡œ/í›„ë ´ 5ì´ˆ ë“£ê³  <strong>ì œëª©</strong> ë§íˆê¸°(ê°€ìˆ˜ê¹Œì§€ ë§íˆë©´ +1).</li>
              <li>ì˜¤ë‹µ ì‹œ 5ì´ˆ í˜ë„í‹°, í—ˆë° ë¼ìš´ë“œ í¬í•¨.</li>
            </ul>
          </div>
        </details>
      </div>
    </section>

    <footer>Â© 2025 ê²½ì˜ê´€ë¦¬ë³¸ë¶€ | Workshop Arcade</footer>
  </div>

  <script>
    // ===== ì„¤ì •: ë³¸ì¸ì˜ Google Apps Script ì›¹ ì•± URLì„ ë„£ìœ¼ì„¸ìš” =====
    const API_URL = "https://script.google.com/macros/s/AKfycbxK0l7gbobMY5y88RVdqL4GfjOdYAyM_cwx3twLtTOb0GhtjD9zoxOKPsDqcTRAKSoBOg/exec"; // ì˜ˆ: https://script.google.com/macros/s/AKfycbx.../exec

    // ===== ì—˜ë¦¬ë¨¼íŠ¸ =====
    const nameInput = document.getElementById("name");
    const assignBtn = document.getElementById("assignBtn");
    const resetBtn  = document.getElementById("resetBtn");
    const who       = document.getElementById("who");
    const teamPill  = document.getElementById("teamPill");
    const teamText  = document.getElementById("teamText");
    const statusLine= document.getElementById("statusLine");

    // ===== ë„ìš°ë¯¸ =====
    const TEAM_KEY = "mt_team_number";
    const NAME_KEY = "mt_user_name";

    function setPill(teamNum){
      const cls = ["t1","t2","t3","t4","t5"];
      teamPill.classList.remove(...cls);
      const t = Number(teamNum);
      teamPill.classList.add(cls[(t-1)%5]);
      teamText.textContent = `${t}ì¡°`;
    }
    function setLoading(on){
      assignBtn.disabled = on;
      assignBtn.textContent = on ? "ë°°ì • ì¤‘..." : "ì¡° ë°°ì • ë°›ê¸°";
      statusLine.textContent = on ? "ë°°ì • ì„œë²„ì™€ í†µì‹  ì¤‘ì…ë‹ˆë‹¤..." : statusLine.textContent;
    }
    function showSaved(){
      const savedName = localStorage.getItem(NAME_KEY);
      const savedTeam = localStorage.getItem(TEAM_KEY);
      if(savedName){ who.textContent = savedName; nameInput.value = savedName; }
      if(savedTeam){ setPill(savedTeam); statusLine.innerHTML = `ì´ ê¸°ê¸°ì—ëŠ” <strong>${savedTeam}ì¡°</strong>ê°€ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.`; }
    }

    // URL ?name=í™ê¸¸ë™ ì²˜ë¦¬
    const params = new URLSearchParams(location.search);
    const urlName = params.get("name");
    if(urlName){
      localStorage.setItem(NAME_KEY, urlName);
    }

    // ì´ˆê¸° ë Œë”
    showSaved();

    // ===== ì´ë²¤íŠ¸ =====
    assignBtn.addEventListener("click", async () => {
      const name = (nameInput.value || "").trim();
      if(!name){ alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."); nameInput.focus(); return; }

      // ì €ì¥ëœ ì´ë¦„ê³¼ ë‹¤ë¥´ë©´ ì´ˆê¸°í™”
      const prevName = localStorage.getItem(NAME_KEY);
      if(prevName && prevName !== name){
        localStorage.removeItem(TEAM_KEY);
      }
      localStorage.setItem(NAME_KEY, name);
      who.textContent = name;

      // ì´ë¯¸ íŒ€ì´ ì €ì¥ë¼ ìˆìœ¼ë©´ ì„œë²„ í˜¸ì¶œ ìƒëµ(ì›í•˜ë©´ ì£¼ì„ ì²˜ë¦¬)
      const savedTeam = localStorage.getItem(TEAM_KEY);
      if(savedTeam){
        statusLine.innerHTML = `ì´ë¯¸ <strong>${savedTeam}ì¡°</strong>ë¡œ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ˆê¸°í™” í›„ ì¬ë°°ì •í•  ìˆ˜ ìˆì–´ìš”.`;
        setPill(savedTeam);
        return;
      }

      if(!API_URL || API_URL === "API_URL_HERE"){
        alert("API URLì´ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. Apps Script ì›¹ ì•± URLì„ ì„¤ì •í•˜ì„¸ìš”.");
        return;
      }

      try{
        setLoading(true);
        const res  = await fetch(`${API_URL}?name=${encodeURIComponent(name)}`, { method:"GET" });
        const data = await res.json();

        if(data.team){
          const team = String(data.team);
          localStorage.setItem(TEAM_KEY, team);
          setPill(team);
          statusLine.innerHTML = `ë°°ì • ì™„ë£Œ: <strong>${team}ì¡°</strong> ğŸ‰ (ì´ ê¸°ê¸°ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤)`;
        }else if(data.error){
          teamText.textContent = "ë°°ì • ì‹¤íŒ¨";
          statusLine.textContent = `ë°°ì • ì‹¤íŒ¨: ${data.error}`;
        }else{
          teamText.textContent = "ë°°ì • ì‹¤íŒ¨";
          statusLine.textContent = "ì•Œ ìˆ˜ ì—†ëŠ” ì‘ë‹µì…ë‹ˆë‹¤.";
        }
      }catch(err){
        console.error(err);
        teamText.textContent = "ë°°ì • ì‹¤íŒ¨";
        statusLine.textContent = "ì„œë²„ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.";
      }finally{
        setLoading(false);
      }
    });

    resetBtn.addEventListener("click", () => {
      localStorage.removeItem(TEAM_KEY);
      localStorage.removeItem(NAME_KEY);
      nameInput.value = "";
      who.textContent = "ì°¸ê°€ì";
      teamPill.className = "pill t1";
      teamPill.innerHTML = '<span class="dot"></span><span id="teamText">ë°°ì • ëŒ€ê¸°</span>';
      statusLine.textContent = "ì´ë¦„ì„ ì…ë ¥í•œ ë’¤ ì¡° ë°°ì • ë°›ê¸°ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
    });
  </script>
</body>
</html>
