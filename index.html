<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>경영관리본부 MT – 레크리에이션</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700;800&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --bg:#0f1220; --ink:#e9ecf4; --muted:#afb7cd; --line:#232843;
      --card:#171b2e; --card-soft:#151a2b; --primary:#7aa2ff; --accent:#72e4c2; --radius:16px;
      --t1:#7aa2ff; --t1-bg:#1a2548;
      --t2:#72e4c2; --t2-bg:#143336;
      --t3:#ffd166; --t3-bg:#3a2e14;
      --t4:#ff8fab; --t4-bg:#3a1f2a;
      --t5:#a78bfa; --t5-bg:#2a2141;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Noto Sans KR",system-ui,sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(114,228,194,.12), transparent 60%),
        radial-gradient(800px 400px at 10% 0%, rgba(122,162,255,.18), transparent 60%),
        var(--bg);
    }
    .wrap{max-width:980px; margin:0 auto; padding:24px 24px 72px}
    .card{border:1px solid var(--line); background:var(--card); border-radius:16px; padding:20px; box-shadow:0 6px 20px rgba(0,0,0,.25)}

    /* 헤더 카드 */
    header.card {
      padding: 36px 28px; /* 상하 여백 늘림 */
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));
    }
    header.card .badge{
      color:#0f1220;
      background:linear-gradient(90deg, var(--primary), var(--accent));
      font-weight:800; padding:6px 10px;
      border-radius:999px; font-size:12px
    }
    .title-lines{margin:12px 0 0;}
    .title-lines .line1{
      display:block;
      font-size:clamp(24px, 3.8vw, 34px);
      font-weight:800;
      letter-spacing:.2px;
      line-height:1.3;
    }
    .title-lines .line2{
      display:block;
      font-size:clamp(18px, 3vw, 26px);
      font-weight:700;
      letter-spacing:.2px;
      color:var(--muted); /* 연한 색으로 보조 강조 */
      margin-top:4px;
      line-height:1.4;
    }
    .subtitle {
      margin:18px 0 0;
      color:var(--muted);
      font-size:clamp(14px, 2.2vw, 16px);
      line-height:1.6;
    }

    .grid{display:grid; gap:16px; margin-top:18px}

    .row{display:flex; gap:10px; flex-wrap:wrap}
    .input{flex:1 1 260px; background:var(--card-soft); color:var(--ink); border:1px solid var(--line);
      border-radius:12px; padding:12px 14px; font-size:16px; outline:none}
    .btn{appearance:none; border:none; cursor:pointer; background:var(--primary); color:#0f1220;
      padding:12px 16px; border-radius:12px; font-weight:800; font-size:16px}
    .hint{color:var(--muted); font-size:13px; margin-top:2px}

    .result{display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      border:1px solid var(--line); border-radius:12px; padding:14px 16px; background:var(--card-soft); margin-top:8px}
    .who{margin:0; font-weight:800; font-size:clamp(16px, 2.6vw, 18px)}
    .pill{padding:10px 14px; border-radius:999px; font-weight:800; font-size:clamp(16px, 3vw, 18px);
      display:inline-flex; align-items:center; gap:8px; border:1px solid transparent}
    .pill .dot{width:8px; height:8px; border-radius:50%}
    .t1{ color:var(--t1); background:var(--t1-bg); border-color:rgba(122,162,255,.5) } .t1 .dot{ background:var(--t1) }
    .t2{ color:var(--t2); background:var(--t2-bg); border-color:rgba(114,228,194,.5) } .t2 .dot{ background:var(--t2) }
    .t3{ color:#ffd166; background:var(--t3-bg); border-color:rgba(255,209,102,.5) } .t3 .dot{ background:#ffd166 }
    .t4{ color:#ff8fab; background:var(--t4-bg); border-color:rgba(255,143,171,.5) } .t4 .dot{ background:#ff8fab }
    .t5{ color:#c2b3ff; background:var(--t5-bg); border-color:rgba(167,139,250,.5) } .t5 .dot{ background:#c2b3ff }

    details{border:1px solid var(--line); border-radius:12px; background:#151a2b; overflow:hidden}
    details+details{margin-top:10px}
    summary{list-style:none; cursor:pointer; padding:16px 18px; font-weight:800;
      display:flex; align-items:center; justify-content:space-between; gap:12px}
    summary::-webkit-details-marker{display:none}
    .tag{ color:#0f1220; background:var(--accent); border-radius:999px; padding:4px 10px; font-size:12px; font-weight:800 }
    .chev{ width:10px; height:10px; border-right:2px solid var(--muted); border-bottom:2px solid var(--muted); transform:rotate(-45deg); transition:.2s; opacity:.9 }
    details[open] .chev{ transform:rotate(45deg) }
    .panel{ padding:0 18px 16px; color:var(--muted); line-height:1.7; font-size:clamp(14px, 2.5vw, 16px);
      border-top:1px solid var(--line); background:linear-gradient(180deg, rgba(255,255,255,.01), transparent) }
    .panel ul{ padding-left:18px; margin:10px 0 0 } .panel li{ margin:4px 0 }

    footer{margin-top:28px; color:var(--muted); font-size:13px; text-align:center}
  </style>
</head>
<body>
  <div class="wrap">
    <header class="card">
      <span class="badge">워크샵 오락실</span>
      <h1 class="title-lines">
        <span class="line1">경영관리본부 MT</span>
        <span class="line2">레크리에이션</span>
      </h1>
      <p class="subtitle">즐겁게 놀고, 가볍게 경쟁하고, 자연스럽게 친해지는 시간!</p>
    </header>

    <section class="grid">
      <!-- 조 배정 -->
      <div class="card">
        <div class="row" aria-label="이름 입력 및 배정">
          <input id="name" class="input" type="text" placeholder="이름(닉네임)을 입력하세요" autocomplete="off">
          <button id="assignBtn" class="btn">조 배정 확인</button>
        </div>
        <div class="hint">※ 같은 이름(닉네임)은 항상 동일한 조로 유지됩니다. (조당 최대 5명)</div>

        <div class="result" role="status" aria-live="polite" style="margin-top:12px">
          <p class="who"><strong id="who">참가자</strong>님의 배정 결과</p>
          <span id="teamPill" class="pill t1"><span class="dot"></span><span id="teamText">대기 중</span></span>
        </div>
        <div class="hint" id="statusLine" style="margin-top:6px">이름을 입력한 뒤 <b>조 배정 확인</b>을 누르세요.</div>
      </div>

      <!-- 게임 안내 -->
      <div class="card">
        <h2 style="margin:0 0 12px; font-size:clamp(18px, 3vw, 22px)">게임 안내 (총 5가지)</h2>

        <details>
          <summary>① 네 글자 게임 <span class="tag">팀전</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>사회자 주제에 맞춰 <strong>정확히 네 글자</strong> 단어를 말하기.</li>
              <li>팀 릴레이 30초, 같은 단어 반복 금지, <em>패스 1회</em>.</li>
              <li>생존 팀 1점씩, 합산 고득점 팀 승리.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>② 쿠팡 가격 맞히기 <span class="tag">퀴즈</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>제시 상품의 <strong>실제 판매가 근사치</strong> 순으로 점수(3 / 2 / 1점).</li>
              <li>가격 공개 전 최종 변경 1회 가능.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>③ 초성 퀴즈 <span class="tag">스피드</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>제시어 <strong>초성</strong>만 보고 정답 맞히기.</li>
              <li>대표자만 콜, 오답 시 5초 대기.</li>
              <li>보너스 라운드 정답 2점.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>④ 고요 속의 외침 <span class="tag">액티브</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>헤드폰 착용자, 입모양/제스처로 제시어 맞히기.</li>
              <li>제한 60초, 정답 1개당 1점, 패스 2회.</li>
            </ul>
          </div>
        </details>

        <details>
          <summary>⑤ 노래 맞히기 <span class="tag">음악</span> <i class="chev"></i></summary>
          <div class="panel">
            <ul>
              <li>인트로/후렴 5초 듣고 <strong>제목</strong> 맞히기(가수까지 맞히면 +1).</li>
              <li>오답 시 5초 페널티, 허밍 라운드 포함.</li>
            </ul>
          </div>
        </details>
      </div>
    </section>

    <footer>© 2025 경영관리본부 | Workshop Arcade</footer>
  </div>

  <script>
    // === Apps Script 웹 앱 URL ===
    const API_URL = "https://script.google.com/macros/s/AKfycbzqTyMhf7sQL5HMwoiD7x-5ASdka8EWNyBZ1JeE25-VR6c93iw9BYxfjeLtJIfhPESixQ/exec"; // ← 본인 URL로 교체하세요

    const nameInput = document.getElementById("name");
    const assignBtn = document.getElementById("assignBtn");
    const who       = document.getElementById("who");
    const teamPill  = document.getElementById("teamPill");
    const teamText  = document.getElementById("teamText");
    const statusLine= document.getElementById("statusLine");

    function setPill(teamNum){
      const classes = ["t1","t2","t3","t4","t5"];
      teamPill.classList.remove(...classes);
      const t = Number(teamNum);
      teamPill.classList.add(classes[(t-1)%5]);
      teamText.textContent = `${t}조`;
    }
    function setLoading(on){
      assignBtn.disabled = on;
      assignBtn.textContent = on ? "확인 중..." : "조 배정 확인";
    }

    async function fetchTeam(name){
      const url = `${API_URL}?name=${encodeURIComponent(name)}`;
      const res = await fetch(url, { method: "GET" });
      if (!res.ok) throw new Error("API 오류");
      return res.json();
    }

    assignBtn.addEventListener("click", async () => {
      const name = (nameInput.value || "").trim();
      if (!name){ alert("이름(닉네임)을 입력하세요."); nameInput.focus(); return; }

      who.textContent = name;
      setLoading(true);
      statusLine.textContent = "배정 서버와 통신 중입니다...";

      try {
        const data = await fetchTeam(name);
        if (data.team){
          setPill(data.team);
          statusLine.innerHTML = data.existing
            ? `이미 배정된 <strong>${data.team}조</strong>입니다.`
            : `배정 완료: <strong>${data.team}조</strong> 🎉`;
        } else {
          teamText.textContent = "배정 실패";
          statusLine.textContent = data.error || "알 수 없는 오류가 발생했습니다.";
        }
      } catch (err) {
        console.error(err);
        teamText.textContent = "배정 실패";
        statusLine.textContent = "서버 연결 오류가 발생했습니다.";
      } finally {
        setLoading(false);
      }
    });
  </script>
</body>
</html>
